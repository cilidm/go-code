# 问答

1.**问题：关于 epoll 和 select 的区别，哪些说法是正确的？（多选）**

A. epoll 和 select 都是 I/O 多路复用的技术，都可以实现同时监听多个 I/O 事件的状态。

B. epoll 相比 select 效率更高，主要是基于其操作系统支持的I/O事件通知机制，而 select 是基于轮询机制。

C. epoll 支持水平触发和边沿触发两种模式。

D. select 能并行支持 I/O 比较小，且无法修改。

**出题人：阿里巴巴出题专家：寈峰／阿里技术专家**

**参考答案：A，B，C**

**【延伸】那在高并发的访问下，epoll使用那一种触发方式要高效些？当使用边缘触发的时候要注意些什么东西？**

****

**2.题目：从 innodb 的索引结构分析，为什么索引的 key 长度不能太长？**

**出题人：阿里巴巴出题专家：近秋／阿里云数据库产品技术部技术专家**

**参考答案：key 太长会导致一个页当中能够存放的 key 的数目变少，间接导致索引树的页数目变多，索引层次增加，从而影响整体查询变更的效率。**

****

**3.题目：MySQL 的数据如何恢复到任意时间点？**

**出题人：阿里巴巴出题专家：近秋／阿里云数据库产品技术部技术专家参考答案**

**参考答案：恢复到任意时间点以定时的做全量备份，以及备份增量的 binlog 日志为前提。恢复到任意时间点首先将全量备份恢复之后，再此基础上回放增加的 binlog 直至指定的时间点。**

****

**4.题目：NFS 和 SMB 是最常见的两种 NAS（Network Attached Storage）协议，当把一个文件系统同时通过 NFS 和 SMB 协议共享给多个主机访问时，以下哪些说法是错误的：（多选）**

A. 不可能有这样的操作，即把一个文件系统同时通过 NFS 和 SMB协议共享给多个主机访问。

B. 主机 a 的用户通过NFS 协议创建的文件或者目录，另一个主机 b的用户不能通过 SMB 协议将其删除。

C. 在同一个目录下，主机 a 通过 NFS 协议看到文件 file.txt，主机b 通过 SMB 协议也看到文件 file.txt，那么它们是同一个文件。

D. 主机 a 通过 NFS 协议，以及主机 b 通过 SMB 协议，都可以通过主机端的数据缓存，提升文件访问性能。

**出题人：阿里巴巴出题专家：起影／阿里云文件存储高级技术专家**

**参考答案：A，B，C**

****

****

**5.题目：输入 ping IP 后敲回车，发包前会发生什么？**

**出题人：阿里巴巴出题专家：怀虎／阿里云云效平台负责人**

**参考答案：**

ping目标ip时，先查路由表，确定出接口

* 如果落在直连接口子网内，此时若为以太网等 _多路访问网络_ 则先查询arp缓存，命中则直接发出，否则在该接口上发arp询问目标ip的mac地址，取得后发出，若为ppp等 _点对点网络_ ，则直接可以发出；
* 如果查表落在缺省路由上，此时若为以太网等 _多路访问网络_ 则先查询网关arp缓存，命中则直接发出，否则在该接口上发arp询问网关的mac地址，取得后发出，若为ppp等 _点对点网络_ ，则直接可以发出；
* 若查表未命中，则返回不可达。



**6.题目：现有一批邮件需要发送给订阅顾客，且有一个集群（集群的节点数不定，会动态扩容缩容）来负责具体的邮件发送任务，如何让系统尽快地完成发送？请详述技术方案！**

**出题人：阿里巴巴出题专家：江岚／阿里巴巴数据技术高级技术专家**

#### **参考答案**：

A. 借助消息中间件，通过发布者订阅者模式来进行任务分配

B. master-slave 部署，由 master 来分配任务

C. 不借助任何中间件，且所有节点均等。通过数据库的 update-returning，从而实现节点之间任务的互斥



**7.题目：有一批气象观测站，现需要获取这些站点的观测数据，并存储到 Hive 中。但是气象局只提供了 api 查询，每次只能查询单个观测点。那么如果能够方便快速地获取到所有的观测点的数据？**

**出题人：阿里巴巴出题专家：江岚／阿里巴巴数据技术高级技术专家**

**参考答案：**

A. 通过 shell 或 python 等调用 api，结果先暂存本地，最后将本地文件上传到 Hive 中。

B. 通过 datax 的 httpReader 和 hdfsWriter 插件，从而获取所需的数据。

C. 比较理想的回答，是在计算引擎的 UDF 中调用查询 api，执行UDF 的查询结果存储到对应的表中。一方面，不需要同步任务的导出导入；另一方面，计算引擎的分布式框架天生提供了分布式、容错、并发等特性。

